$.fn.languagePicker=function(a){var e=this,n=document.createElement("script");n.readyState?n.onreadystatechange=function(){("loaded"===n.readyState||"complete"===n.readyState)&&(n.onreadystatechange=null,LanguagePicker.loadPicker(e,a))}:n.onload=function(){LanguagePicker.loadPicker(e,a)},n.src="https://ssl.microsofttranslator.com/ajax/v3/WidgetV3.ashx?siteData=ueOIGRSKkd965FeEGM5JtQ**";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)};var LanguagePicker={defaultLang:"en",currentLang:"en",preferredLangKey:"BING_TRANSLATE_PREFERRED_LANG",localizedLanguageNames:{},sortableLanguages:[],loadingImageUrl:"images/ajax-loader.gif",autoTranslateDelay:0,buildLanguageList:function(a){a=a.sort(this.languageSort);for(var e,n=0;n<a.length;n++)n%17==0&&(e=$("<div/>").addClass("column")),e.append($("<li/>").attr("data-lang-code",a[n].Code).text(a[n].Name+" ("+this.localizedLanguageNames[a[n].Code]+")").click(function(a){LanguagePicker.translate($(a.target).data("lang-code"))})),(n%17==16||n+1==a.length)&&$(".language-picker-list").append(e);LanguagePicker.footer.appendTo(".language-picker-list")},buildPrefLangPicker:function(a,e){var n=this.sortableLanguages.sort(this.languageSort);for(var t in n)$("<li/>").attr("onclick","LanguagePicker.changePreferredLangugage(this);").attr("data-lang",n[t].Code).text(n[t].Name).appendTo(e)},changeLangSelected:function(a){return translate($(a.target).data("lang-code")),a.preventDefault(),!1},changePreferredLangugage:function(a){var e=$(a).data("lang");$(".pref-lang-picker > span").text(this.localizedLanguageNames[e]),this.setPreferredLanguage(e),this.translate(e)},getCurrentLanguageLanguageList:function(){Microsoft.Translator.Widget.GetLanguagesForTranslate(this.currentLang?this.currentLang:this.defaultLang,function(a){LanguagePicker.buildLanguageList(a)})},getLoadingImage:function(){return $("<div/>").addClass("loadingImage").append($("<div/>").text("Translating...")).append($("<img/>").attr("src",this.loadingImageUrl))},getPreferredLanguage:function(){var a=localStorage[this.preferredLangKey];return a||(a=(navigator.language?navigator.language:navigator.browserLanguage).substring(0,2),this.setPreferredLanguage(a)),a},isIE:function(a,e){var n,t="IE",r=document.createElement("B"),g=document.documentElement;return a&&(t+=" "+a,e&&(t=e+" "+t)),r.innerHTML="<!--[if "+t+']><b id="iecctest"></b><![endif]-->',g.appendChild(r),n=!!document.getElementById("iecctest"),g.removeChild(r),n},languageSort:function(a,e){return a.Name==e.Name?0:a.Name>e.Name?1:-1},loadPicker:function(a,e){for(var n=$(a).addClass("language-picker"),t=$("<ul/>").addClass("language-picker-list"),r=Microsoft.Translator.Widget.GetLanguagesForTranslateLocalized(),g=0;g<r.length;g++)LanguagePicker.localizedLanguageNames[r[g].Code]=r[g].Name,LanguagePicker.sortableLanguages.push({Code:r[g].Code,Name:r[g].Name});if(LanguagePicker.footer=$("<div/>").addClass("language-picker-footer"),$("<div/>").append($("<a/>").attr("href","#").addClass("orig-lang").text("Original Language: "+LanguagePicker.localizedLanguageNames[LanguagePicker.defaultLang]).attr("onclick","Microsoft.Translator.Widget.RestoreOriginal();")).appendTo(LanguagePicker.footer),e&&"auto"==e.mode){var i=LanguagePicker.getPreferredLanguage();e.delay&&(this.autoTranslateDelay=e.delay);var l=$("<div/>").addClass("preferred-language").addClass("no-edit").text("Preferred Language: "),s=$("<div/>").addClass("pref-lang-picker").append($("<span/>").text(LanguagePicker.localizedLanguageNames[i])).append($("<div/>").addClass("caret")),o=$("<ul/>").addClass("pref-lang-list").attr("translate","no");LanguagePicker.buildPrefLangPicker(i,o),o.appendTo(s),s.appendTo(l),l.appendTo(LanguagePicker.footer),$(window).load(function(){setTimeout(function(){LanguagePicker.translate(i)},LanguagePicker.autoTranslateDelay)})}LanguagePicker.getCurrentLanguageLanguageList(),this.isIE(8,"lte")&&n.css("margin-left","30px"),n.text("Translate: "),n.append($("<span/>").addClass("language-name").attr("translate","no").text(LanguagePicker.localizedLanguageNames[LanguagePicker.currentLang])),t.appendTo(n)},setPreferredLanguage:function(a){localStorage.setItem(this.preferredLangKey,a)},translate:function(a){LanguagePicker.currentLang=a,$(".language-picker-list").append(LanguagePicker.getLoadingImage()),Microsoft.Translator.Widget.Translate(this.defaultLang,a,this.translateProgress,this.translateError,this.translateComplete,this.translateRestoreOriginal,6e4)},translateComplete:function(){$("#languagePicker").mouseleave(),$(".language-name").text(LanguagePicker.localizedLanguageNames[LanguagePicker.currentLang]),$(".language-picker-list").empty(),LanguagePicker.getCurrentLanguageLanguageList(),$(".loadingImage").remove(".language-picker-list")},translateError:function(a){console.log(a)},translateProgress:function(){},translateRestoreOriginal:function(){LanguagePicker.currentLang=LanguagePicker.defaultLang,LanguagePicker.translateComplete()}};